CREATE TABLE PERSON (
ID		NUMBER(9) 	NOT NULL 		PRIMARY KEY,
FName		VARCHAR2(12) 	NOT NULL,
MName 		CHAR 		NOT NULL,
LName 		VARCHAR2 (12) 	NOT NULL,
Street 		VARCHAR2 (12) 	NOT NULL,
City 		VARCHAR2 (12) 	NOT NULL,
Country 	VARCHAR2 (12) 	NOT NULL,
Nationality 	VARCHAR2 (15),
Mobile_NO 	VARCHAR2 (15) 	NOT NULL,
Gender 	CHAR 			NOT NULL,
Birth_Date 	DATE 		NOT NULL,
Email 		VARCHAR2 (31)
);

CREATE TABLE GUEST ( 
Guest_ID 	NUMBER(9)	NOT NULL 		PRIMARY KEY,
Total_Payment 	FLOAT,
FOREIGN KEY (Guest_ID) REFERENCES Person(ID) ON DELETE CASCADE
);

CREATE SEQUENCE EMP_SEQ 
INCREMENT BY 1 
START WITH 2
MINVALUE 2
CACHE 20 
ORDER;

CREATE SEQUENCE Booking_SEQ
INCREMENT BY 1
START WITH 1
MINVALUE 1
ORDER;

CREATE TABLE EMPLOYEE (
Emp_No 		NUMBER(5) 	NOT NULL 		PRIMARY KEY,
Emp_ID 		NUMBER(9) 	NOT NULL ,
Salary 		NUMBER(6) 	NOT NULL ,
Social_State 	VARCHAR2(15) 	NOT NULL,
Phone_NO 	NUMBER(15),
Family_Count 	NUMBER(3),
FOREIGN KEY (emp_id) REFERENCES Person(ID) ON DELETE CASCADE
);

CREATE TABLE  DEPENDENT (
Emp_NO 		NUMBER(5)	NOT NULL ,
Dep_Name 	VARCHAR2(9) 	NOT NULL,
Dep_BD 		DATE,
Dep_Gender 	CHAR,
Dep_Relationship VARCHAR2(15),
PRIMARY KEY (Emp_NO,Dep_Name),
FOREIGN KEY (emp_no) REFERENCES Employee(Emp_NO) ON DELETE CASCADE
);

CREATE TABLE ASSIGNS (
Username 		VARCHAR2(15) 	NOT NULL 	PRIMARY KEY,
Password 		VARCHAR2(15) 	NOT NULL,
Security_Question 	VARCHAR2(64) 	NOT NULL,
Answer 			VARCHAR2(64) 	NOT NULL,
Emp_NO 			NUMBER(5) 		NOT NULL,
FOREIGN KEY (emp_no)  REFERENCES Employee(Emp_NO) ON DELETE CASCADE
);

CREATE TABLE BOOKING (
Booking_NO 		NUMBER(6) 	NOT NULL 	PRIMARY KEY,
Booking_Date 		DATE 		NOT NULL,
Booking_Type 		VARCHAR2(9) 	NOT NULL,
Guest_ID 		NUMBER(9) 	NOT NULL ,
Username 		VARCHAR2(15) 	NOT NULL  ,

FOREIGN KEY (guest_id) REFERENCES Guest(Guest_ID) ON DELETE CASCADE,
FOREIGN KEY (username) REFERENCES Assigns(Username) ON DELETE CASCADE
);

CREATE TABLE MEAL (
Name 			VARCHAR2(15) 	NOT NULL 	PRIMARY KEY,
Price 			FLOAT 		NOT NULL,
Booking_NO 		NUMBER(6) ,
FOREIGN KEY (booking_no) REFERENCES Booking(Booking_NO) ON DELETE SET NULL
);

CREATE TABLE ROOM_TYPE (
Type_Code 		VARCHAR2(15) 	NOT NULL 	PRIMARY KEY,
Description 		VARCHAR2(128) ,
Price 			NUMBER(6) 	NOT NULL,
Floor 			NUMBER(3) 	NOT NULL
);

CREATE TABLE ROOM (
Room_NO 		NUMBER (3) 	NOT NULL 	PRIMARY KEY,
Purpose_Of_Visit 	VARCHAR2(15) ,
Check_In_Date 		DATE ,
Phone_NO		NUMBER(15) 	NOT NULL,
Availability 		CHAR 		NOT NULL,
Room_Type 		VARCHAR2(15) 	NOT NULL 		REFERENCES Room_Type(Type_Code) ON DELETE CASCADE,

Booking_NO 		NUMBER(6),
Visit_Period 		NUMBER(4) ,

FOREIGN KEY (booking_no)  REFERENCES Booking(Booking_NO) ON DELETE SET NULL
);

Insert into PERSON (ID,FNAME,MNAME,LNAME,STREET,CITY,COUNTRY,NATIONALITY,MOBILE_NO,GENDER,BIRTH_DATE,EMAIL) values (402804033,'Ashraf','N','Ghanem','Al-Sahel','Tulkarm','Palestine','Palestinian','0595736981','M',to_timestamp('11-JAN-98 12.00.00.000000000 AM','DD-MON-RR HH.MI.SS.FF AM'),'ans_g1998@hotmail.com');

Insert into EMPLOYEE (EMP_NO,EMP_ID,SALARY,SOCIAL_STATE,PHONE_NO,FAMILY_COUNT) values (1,402804033,5000,'Single',92663809,0);

Insert into ASSIGNS (USERNAME,PASSWORD,SECURITY_QUESTION,ANSWER,EMP_NO) values ('ashrafghanem','12345','Where were you born?','Tulkarm',1);

commit;
